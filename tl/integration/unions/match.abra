type U1 = Boolean | Int

def ==: (self: Int, other: Int) -> Boolean = llvm {
  %1 = icmp eq i32 %self, %other
  ret i1 %1
}

def main = {
    val u: U1 = 3
    match u
        of i: Int -> i
        of b: Boolean -> 0
}: Int # 3 expected