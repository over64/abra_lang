import org.postgresql.pg

type User = (name: String, age: Int, lastName: Option<String> = None)

def main = {
  val (uname, passwd) = ('over', '123')
  val connFactory = pg.mkConnFactory('localhost:5432/test_db', uname, passwd)

  connFactory.withConnection({ conn ->
    (1 to 10).foreach({ id ->
      # direct entity mapping using macro?
      val user = conn
        .execute[User]('select #name, #age from users where id = $id').headOption
      user.print
    })
  })
}: Unit