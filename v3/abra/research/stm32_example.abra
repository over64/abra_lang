dependency('abra-stm32', '1.0.0')
import abra.range
import(model = f103xx) abra.stm32.rcc with APB1ENR
import(model = f103xx) abra.stm32.gpio

def sleep = (1 to 1000000).forEach(\i -> ) .

def main =
    rcc.apb1enr.or(APB1ENR.GPIODEN)
    gpio.d.moder(0x55000000)
    gpio.d.otyper(0)
    gpio.d.ospeedr(0)

    while true do
        gpio.d.odr(0xf000)
        sleep()
        gpio.d.odr(0x0000)
        sleep() ..